syntax = "proto3";

package users.v1;

option go_package = "github.com/kalina-malina/IM-PROTOS/generated/users/v1";


service UsersService {
  rpc NewUserInfo(NewUserInfoRequest) returns (NewUserInfoResponse);
  //rpc UpdateUser(UpdateUserRequest) returns (UpdateUserResponse);
  //rpc LockUser(LockUserRequest) returns (LockUserResponse);
  //
  //rpc UpdateUserSettings(UpdateUserSettingsRequest) returns (UpdateUserSettingsResponse);
  
}

message NewUserInfoRequest {
  uint64 id = 1;
  string name = 2;
  uint64 card_number = 3;
  string phone = 4;
  string email = 5;
  repeated Child children = 7;
}

message NewUserInfoResponse {
  User user = 1;
}

message User{
  uint64 id = 1;
  string name = 2;
  uint64 card_number = 3;
  string phone = 4;
  string email = 5;
  Role role = 7;
  repeated Child children = 6;
}


message Child {
  string name = 1;
  uint64 age = 2;
  string mail = 3;
  optional uint64 card_number = 4;
}

message UserSettings {
  bool push_notifications = 1;        // Push уведомления
  bool email_notifications = 2;       // Email уведомления
  bool sms_notifications = 3;         // SMS уведомления
  bool marketing_emails = 4;          // Маркетинговые рассылки
  bool marketing_sms = 5;             // Маркетинговые SMS
  bool order_updates = 6;             // Уведомления о заказах
  bool promotional_offers = 7;        // Промо-акции
  optional uint32 last_selected_store_id = 8; // Последний выбранный магазин
}

enum Role {
  ROLE_CLIENT = 0;
  ROLE_ADMIN = 1;
  ROLE_OPERATOR = 2;
  ROLE_MARKETING = 3;
  ROLE_SUPPORT = 4;
  ROLE_MANAGEMENT = 5;
}