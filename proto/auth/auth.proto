syntax = "proto3";

package auth.v1;

option go_package = "github.com/kalina-malina/IM-PROTOS/generated/auth/v1";
import "union/user_setting.proto"; 

service AuthOrRegistrationService {
  rpc RegiterClient(RegisterClientRequest) returns (RegisterClientResponse);
  rpc VerifySmsCode(VerifySmsCodeRequest) returns (VerifySmsCodeResponse);
}

message RegisterClientRequest {
  string phone_number = 1;

}

message RegisterClientResponse {
  bool satus = 1;
  bool is_new_client = 2;
  optional string msg = 3;
  optional string verification_id  = 4;
  
}

message VerifySmsCodeRequest {
  optional string verification_id = 1;
  optional string code = 2;
}

message VerifySmsCodeResponse {
  bool is_verified = 1;
  bool is_new_user = 2;
  string access_token = 3;
  string sid = 4;
  Client client = 5;
  union.v1.UserSettings UserSettings = 6;
}

message Client{
  uint32 id = 1;
  string card_number = 2;
  optional uint32 lastSelectedStoreId = 3;
}

