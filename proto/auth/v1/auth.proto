syntax = "proto3";

package auth.v1;

option go_package = "github.com/kalina-malina/IM-PROTOS/generated/auth/v1";
import "users/v1/users.proto"; 

service AuthOrRegistrationService {
  rpc LoginUsers(LoginUsersRequest) returns (LoginUsersResponse);
  rpc VerifySmsCode(VerifySmsCodeRequest) returns (VerifySmsCodeResponse);
}


message LoginUsersRequest {
  string phone_number = 1;
  TypeLogin type_login = 2;
  optional string verification_id  = 3;

}

message LoginUsersResponse {
  bool securety = 1;
  optional bool is_new_user = 2;
  optional bool blocked = 3;
  optional string msg = 4;
  optional string verification_id  = 5;
  
}


enum TypeLogin {
  TYPE_LOGIN_SMS = 0;
  TYPE_LOGIN_YANDEX = 1;
}


message VerifySmsCodeRequest {
  optional string verification_id = 1;
  optional string code = 2;
}

message VerifySmsCodeResponse {
  bool is_verified = 1;
  bool is_new_user = 2;
  bool is_anketa_filled = 3;
  string access_token = 4;
  string sid = 5;
  optional users.v1.User user = 6;
}





