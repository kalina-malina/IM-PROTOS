syntax = "proto3";

package users_service.v1;

option go_package = "github.com/kalina-malina/IM-PROTOS/generated/users_service/v1";

import "users_service/v1/user.proto";
import "common/types.proto";

service UserService {
  
  // Получение информации о текущем пользователе
  rpc GetMyProfile(GetMyProfileRequest) returns (GetMyProfileResponse);

  // Редактирование профиля клиента
  rpc UpdateCustomerProfile(UpdateCustomerProfileRequest) returns (UpdateCustomerProfileResponse);
  
  // Обновление настроек клиента
  rpc UpdateCustomerSettings(UpdateCustomerSettingsRequest) returns (UpdateCustomerSettingsResponse);
  
  // Удаление аккаунта клиентом
  rpc DeleteMyAccount(DeleteMyAccountRequest) returns (DeleteMyAccountResponse);
  
}


message GetMyProfileRequest {
  uint64 id_user = 1;                 // ID пользователя из токена
}

message GetMyProfileResponse {
  User user = 1;                      // Информация о пользователе
}


message UpdateCustomerProfileRequest {
  uint64 id_user = 1;                 // ID пользователя
  string firstname = 2;               // Имя
  string lastname = 3;                // Фамилия
  string middlename = 4;              // Отчество
  Gender gender = 5;                  // Пол
  string email = 6;                   // Email
  string avatar_url = 7;              // URL аватара
  string date_of_birth = 8;           // Дата рождения (YYYY-MM-DD)
  int32 city_id = 9;                  // ID города из справочника
  int32 region_id = 10;               // ID региона из справочника
}

message UpdateCustomerProfileResponse {
  User user = 1;                      // Обновленный пользователь
}

message UpdateCustomerSettingsRequest {
  uint64 id_user = 1;                 // ID пользователя
  CustomerSettings settings = 2;      // Настройки
}

message UpdateCustomerSettingsResponse {
  bool success = 1;                   // Успешность операции
  CustomerSettings settings = 2;      // Обновленные настройки
}

message DeleteMyAccountRequest {
  uint64 id_user = 1;                 // ID пользователя
  string reason = 2;                  // Причина удаления
}

message DeleteMyAccountResponse {
  bool success = 1;                   // Успешность операции
  string message = 2;                 // Сообщение
}

